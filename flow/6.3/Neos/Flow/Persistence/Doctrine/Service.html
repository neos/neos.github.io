<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="robots" content="index, follow, all" />
    <title>Neos\Flow\Persistence\Doctrine\Service | Flow Framework</title>

            <link rel="stylesheet" type="text/css" href="../../../../css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="../../../../css/bootstrap-theme.min.css">
        <link rel="stylesheet" type="text/css" href="../../../../css/doctum.css">
        <link rel="stylesheet" type="text/css" href="../../../../fonts/doctum-font.css">
        <script src="../../../../js/jquery-3.5.1.slim.min.js"></script>
        <script async defer src="../../../../doctum.js"></script>
        <script async defer src="../../../../js/bootstrap.min.js"></script>
        <script async defer src="../../../../js/autocomplete.min.js"></script>
        <meta name="MobileOptimized" content="width">
        <meta name="HandheldFriendly" content="true">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
        <link rel="shortcut icon" href="https://www.neos.io/favicon-32x32.png" />
        <link rel="search"
          type="application/opensearchdescription+xml"
          href="https://neos.github.io/opensearch.xml"
          title="Flow Framework (6.3)" />
    </head>

    <body id="class" data-name="class:Neos_Flow_Persistence_Doctrine_Service" data-root-path="../../../../" data-search-index-url="../../../../doctum-search.json">
            <div id="content">
        <div id="left-column">
                <div id="control-panel">
                <div class="search-bar hidden" id="search-progress-bar-container">
            <div class="progress">
                <div class="progress-bar" role="progressbar" id="search-progress-bar"
                    aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"></div>
            </div>
        </div>
        <form id="search-form" action="../../../../search.html">
            <span class="icon icon-search"></span>
            <input name="search"
                   id="doctum-search-auto-complete"
                   class="typeahead form-control"
                   type="search"
                   placeholder="Search"
                   spellcheck="false"
                   autocorrect="off"
                   autocomplete="off"
                   autocapitalize="off">
            <div class="auto-complete-results" id="auto-complete-results"></div>
        </form>
    </div>

                <div id="api-tree"></div>

        </div>
        <div id="right-column">
                <nav id="site-nav" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-elements">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../../../index.html">Flow Framework</a>
            </div>
            <div class="collapse navbar-collapse" id="navbar-elements">
                <ul class="nav navbar-nav">
                    <li><a href="../../../../classes.html">Classes</a></li>
                    <li><a href="../../../../namespaces.html">Namespaces</a></li>
                    <li><a href="../../../../interfaces.html">Interfaces</a></li>
                    <li><a href="../../../../traits.html">Traits</a></li>
                    <li><a href="../../../../doc-index.html">Index</a></li>
                    <li><a href="../../../../search.html">Search</a></li>
                </ul>
            </div>
        </div>
    </nav>

                        <div class="namespace-breadcrumbs">
            <ol class="breadcrumb">
                <li><span class="label label-default">class</span></li>
                        <li><a href="../../../../Neos.html">Neos</a></li><li class="backslash">\</li><li><a href="../../../../Neos/Flow.html">Flow</a></li><li class="backslash">\</li><li><a href="../../../../Neos/Flow/Persistence.html">Persistence</a></li><li class="backslash">\</li><li><a href="../../../../Neos/Flow/Persistence/Doctrine.html">Doctrine</a></li><li class="backslash">\</li><li>Service</li>
            </ol>
        </div>
                <div id="page-content">
    <div class="page-header">
        <h1>Service    
            </h1>
    </div>

    
    <p>        class
    <strong>Service</strong>        (<a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php">View source</a>)
</p>

        
    
        

            <div class="description">
            <p><p>Service class for tasks related to Doctrine</p></p>                    </div>
            
        
            <h2>Constants</h2>    <table class="table table-condensed">
                    <tr>
                <td>
                                                                                                                        DOCTRINE_MIGRATIONSTABLENAME
                                    </td>
                <td class="last">
                    <p><em></em></p>
                    <p></p>
                </td>
            </tr>
            </table>

    
            <h2>Properties</h2>

            <table class="table table-condensed">
                    <tr>
                <td class="type" id="property_output">
                                                                                array
                                                                                
                                    </td>
                <td>$output</td>
                <td class="last"></td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_entityManager">
                                        protected                                        <abbr title="Doctrine\ORM\EntityManagerInterface">EntityManagerInterface</abbr>
                                                                                
                                    </td>
                <td>$entityManager</td>
                <td class="last"></td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_packageManager">
                                        protected                                        <a href="../../../../Neos/Flow/Package/PackageManager.html"><abbr title="Neos\Flow\Package\PackageManager">PackageManager</abbr></a>
                                                                                
                                    </td>
                <td>$packageManager</td>
                <td class="last"></td>
                <td></td>
            </tr>
                    <tr>
                <td class="type" id="property_environment">
                                        protected                                        <a href="../../../../Neos/Flow/Utility/Environment.html"><abbr title="Neos\Flow\Utility\Environment">Environment</abbr></a>
                                                                                
                                    </td>
                <td>$environment</td>
                <td class="last"></td>
                <td></td>
            </tr>
            </table>

    
            <h2>Methods</h2>

            <div class="container-fluid underlined">
                    <div class="row">
                <div class="col-md-2 type">
                    array
                </div>
                <div class="col-md-8">
                    <a href="#method_validateMapping">validateMapping</a>()
        
                                            <p><p>Validates the metadata mapping for Doctrine, using the SchemaValidator
of Doctrine.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_createSchema">createSchema</a>(string $outputPathAndFilename = null)
        
                                            <p><p>Creates the needed DB schema using Doctrine's SchemaTool. If tables already
exist, this will throw an exception.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_updateSchema">updateSchema</a>(bool $safeMode = true, string $outputPathAndFilename = null)
        
                                            <p><p>Updates the DB schema using Doctrine's SchemaTool. The $safeMode flag is passed
to SchemaTool unchanged.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    void
                </div>
                <div class="col-md-8">
                    <a href="#method_compileProxies">compileProxies</a>()
        
                                            <p><p>Compiles the Doctrine proxy class code using the Doctrine ProxyFactory.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    array
                </div>
                <div class="col-md-8">
                    <a href="#method_getEntityStatus">getEntityStatus</a>()
        
                                            <p><p>Returns information about which entities exist and possibly if their
mapping information contains errors or not.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    mixed
                </div>
                <div class="col-md-8">
                    <a href="#method_runDql">runDql</a>(string $dql, int $hydrationMode = \Doctrine\ORM\Query::HYDRATE_OBJECT, int $firstResult = null, int $maxResult = null)
        
                                            <p><p>Run DQL and return the result as-is.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    <abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr>
                </div>
                <div class="col-md-8">
                    <a href="#method_getMigrationConfiguration">getMigrationConfiguration</a>()
        
                                            <p><p>Return the configuration needed for Migrations.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    array
                </div>
                <div class="col-md-8">
                    <a href="#method_getMigrationStatus">getMigrationStatus</a>()
        
                                            <p><p>Returns the current migration status as an array.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_getFormattedMigrationStatus">getFormattedMigrationStatus</a>(bool $showMigrations = false, bool $showDescriptions = false)
        
                                            <p><p>Returns a formatted string of current database migration status.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_getPackageKeyFromMigrationVersion">getPackageKeyFromMigrationVersion</a>(<abbr title="Doctrine\DBAL\Migrations\Version">Version</abbr> $version)
        
                                            <p><p>Tries to find out a package key which the Version belongs to. If no
package could be found, an empty string is returned.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_getFormattedVersionAlias">getFormattedVersionAlias</a>(string $alias, <abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr> $configuration)
        
                                            <p><p>Returns a formatted version string for the alias.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_getMigrationDescription">getMigrationDescription</a>(<abbr title="Doctrine\DBAL\Migrations\Version">Version</abbr> $version, <a href="../../../../Neos/Flow/Reflection/DocCommentParser.html"><abbr title="Neos\Flow\Reflection\DocCommentParser">DocCommentParser</abbr></a> $parser)
        
                                            <p><p>Returns the description of a migration.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_executeMigrations">executeMigrations</a>(string $version = null, string $outputPathAndFilename = null, bool $dryRun = false, bool $quiet = false)
        
                                            <p><p>Execute all new migrations, up to $version if given.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_executeMigration">executeMigration</a>(string $version, string $direction = &#039;up&#039;, string $outputPathAndFilename = null, bool $dryRun = false)
        
                                            <p><p>Execute a single migration in up or down direction. If $path is given, the
SQL statements will be written to the file in $path instead of executed.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    void
                </div>
                <div class="col-md-8">
                    <a href="#method_markAsMigrated">markAsMigrated</a>(string $version, bool $markAsMigrated)
        
                                            <p><p>Add a migration version to the migrations table or remove it.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    array
                </div>
                <div class="col-md-8">
                    <a href="#method_generateMigration">generateMigration</a>(bool $diffAgainstCurrent = true, string $filterExpression = null)
        
                                            <p><p>Generates a new migration file and returns the path to it.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_writeMigrationClassToFile">writeMigrationClassToFile</a>(<abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr> $configuration, string|null $up, string|null $down)
        
                                            <p class="no-description">No description</p>
                                    </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_buildCodeFromSql">buildCodeFromSql</a>(<abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr> $configuration, array $sql)
        
                                            <p><p>Returns PHP code for a migration file that &quot;executes&quot; the given
array of SQL statements.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    string
                </div>
                <div class="col-md-8">
                    <a href="#method_getDatabasePlatformName">getDatabasePlatformName</a>()
        
                                            <p><p>Get name of current database platform</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
                    <div class="row">
                <div class="col-md-2 type">
                    static&nbsp;array
                </div>
                <div class="col-md-8">
                    <a href="#method_getForeignKeyHandlingSql">getForeignKeyHandlingSql</a>(<abbr title="Doctrine\DBAL\Schema\Schema">Schema</abbr> $schema, <abbr title="Doctrine\DBAL\Platforms\AbstractPlatform">AbstractPlatform</abbr> $platform, array $tableNames, string $search, string $replace)
        
                                            <p><p>This serves a rather strange use case: renaming columns used in FK constraints.</p></p>                </div>
                <div class="col-md-2"></div>
            </div>
            </div>


        <h2>Details</h2>

            <div id="method-details">
                    <div class="method-item">
                    <h3 id="method_validateMapping">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L75">at line 75</a></div>
        <code>                    array
    <strong>validateMapping</strong>()
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Validates the metadata mapping for Doctrine, using the SchemaValidator
of Doctrine.</p></p>                        
        </div>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>array</td>
            <td></td>
        </tr>
    </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_createSchema">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L93">at line 93</a></div>
        <code>                    string
    <strong>createSchema</strong>(string $outputPathAndFilename = null)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Creates the needed DB schema using Doctrine's SchemaTool. If tables already
exist, this will throw an exception.</p></p>                        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$outputPathAndFilename</td>
                <td><p>A file to write SQL to, instead of executing it</p></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\ORM\Tools\ToolsException">ToolsException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_updateSchema">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L113">at line 113</a></div>
        <code>                    string
    <strong>updateSchema</strong>(bool $safeMode = true, string $outputPathAndFilename = null)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Updates the DB schema using Doctrine's SchemaTool. The $safeMode flag is passed
to SchemaTool unchanged.</p></p>                        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>bool</td>
                <td>$safeMode</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$outputPathAndFilename</td>
                <td><p>A file to write SQL to, instead of executing it</p></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_compileProxies">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L131">at line 131</a></div>
        <code>                    void
    <strong>compileProxies</strong>()
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Compiles the Doctrine proxy class code using the Doctrine ProxyFactory.</p></p>                        
        </div>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>void</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a href="../../../../Neos/Utility/Exception/FilesException.html"><abbr title="Neos\Utility\Exception\FilesException">FilesException</abbr></a></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getEntityStatus">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L146">at line 146</a></div>
        <code>                    array
    <strong>getEntityStatus</strong>()
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Returns information about which entities exist and possibly if their
mapping information contains errors or not.</p></p>                        
        </div>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>array</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\ORM\ORMException">ORMException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_runDql">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L170">at line 170</a></div>
        <code>                    mixed
    <strong>runDql</strong>(string $dql, int $hydrationMode = \Doctrine\ORM\Query::HYDRATE_OBJECT, int $firstResult = null, int $maxResult = null)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Run DQL and return the result as-is.</p></p>                        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$dql</td>
                <td></td>
            </tr>
                    <tr>
                <td>int</td>
                <td>$hydrationMode</td>
                <td></td>
            </tr>
                    <tr>
                <td>int</td>
                <td>$firstResult</td>
                <td></td>
            </tr>
                    <tr>
                <td>int</td>
                <td>$maxResult</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>mixed</td>
            <td></td>
        </tr>
    </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getMigrationConfiguration">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L190">at line 190</a></div>
        <code>            protected        <abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr>
    <strong>getMigrationConfiguration</strong>()
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Return the configuration needed for Migrations.</p></p>                        
        </div>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td><abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr></td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getMigrationStatus">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L236">at line 236</a></div>
        <code>                    array
    <strong>getMigrationStatus</strong>()
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Returns the current migration status as an array.</p></p>                        
        </div>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>array</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getFormattedMigrationStatus">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L276">at line 276</a></div>
        <code>                    string
    <strong>getFormattedMigrationStatus</strong>(bool $showMigrations = false, bool $showDescriptions = false)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Returns a formatted string of current database migration status.</p></p>                        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>bool</td>
                <td>$showMigrations</td>
                <td></td>
            </tr>
                    <tr>
                <td>bool</td>
                <td>$showDescriptions</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a target="_blank" rel="noopener" href="https://www.php.net/ReflectionException">ReflectionException</a></td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getPackageKeyFromMigrationVersion">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L341">at line 341</a></div>
        <code>            protected        string
    <strong>getPackageKeyFromMigrationVersion</strong>(<abbr title="Doctrine\DBAL\Migrations\Version">Version</abbr> $version)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Tries to find out a package key which the Version belongs to. If no
package could be found, an empty string is returned.</p></p>                        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\Migrations\Version">Version</abbr></td>
                <td>$version</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a target="_blank" rel="noopener" href="https://www.php.net/ReflectionException">ReflectionException</a></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getFormattedVersionAlias">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L369">at line 369</a></div>
        <code>            protected        string
    <strong>getFormattedVersionAlias</strong>(string $alias, <abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr> $configuration)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Returns a formatted version string for the alias.</p></p>                        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$alias</td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr></td>
                <td>$configuration</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getMigrationDescription">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L399">at line 399</a></div>
        <code>            protected        string
    <strong>getMigrationDescription</strong>(<abbr title="Doctrine\DBAL\Migrations\Version">Version</abbr> $version, <a href="../../../../Neos/Flow/Reflection/DocCommentParser.html"><abbr title="Neos\Flow\Reflection\DocCommentParser">DocCommentParser</abbr></a> $parser)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Returns the description of a migration.</p></p>                <p><p>If available it is fetched from the getDescription() method, if that returns an empty value
the class docblock is used instead.</p></p>        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\Migrations\Version">Version</abbr></td>
                <td>$version</td>
                <td></td>
            </tr>
                    <tr>
                <td><a href="../../../../Neos/Flow/Reflection/DocCommentParser.html"><abbr title="Neos\Flow\Reflection\DocCommentParser">DocCommentParser</abbr></a></td>
                <td>$parser</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a target="_blank" rel="noopener" href="https://www.php.net/ReflectionException">ReflectionException</a></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_executeMigrations">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L423">at line 423</a></div>
        <code>                    string
    <strong>executeMigrations</strong>(string $version = null, string $outputPathAndFilename = null, bool $dryRun = false, bool $quiet = false)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Execute all new migrations, up to $version if given.</p></p>                <p><p>If $outputPathAndFilename is given, the SQL statements will be written to the given file instead of executed.</p></p>        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$version</td>
                <td><p>The version to migrate to</p></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$outputPathAndFilename</td>
                <td><p>A file to write SQL to, instead of executing it</p></td>
            </tr>
                    <tr>
                <td>bool</td>
                <td>$dryRun</td>
                <td><p>Whether to do a dry run or not</p></td>
            </tr>
                    <tr>
                <td>bool</td>
                <td>$quiet</td>
                <td><p>Whether to do a quiet run or not</p></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\Migrations\MigrationException">MigrationException</abbr></td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_executeMigration">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L460">at line 460</a></div>
        <code>                    string
    <strong>executeMigration</strong>(string $version, string $direction = &#039;up&#039;, string $outputPathAndFilename = null, bool $dryRun = false)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Execute a single migration in up or down direction. If $path is given, the
SQL statements will be written to the file in $path instead of executed.</p></p>                        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$version</td>
                <td><p>The version to migrate to</p></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$direction</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$outputPathAndFilename</td>
                <td><p>A file to write SQL to, instead of executing it</p></td>
            </tr>
                    <tr>
                <td>bool</td>
                <td>$dryRun</td>
                <td><p>Whether to do a dry run or not</p></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\Migrations\MigrationException">MigrationException</abbr></td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_markAsMigrated">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L485">at line 485</a></div>
        <code>                    void
    <strong>markAsMigrated</strong>(string $version, bool $markAsMigrated)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Add a migration version to the migrations table or remove it.</p></p>                <p><p>This does not execute any migration code but simply records a version
as migrated or not.</p></p>        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>string</td>
                <td>$version</td>
                <td><p>The version to add or remove</p></td>
            </tr>
                    <tr>
                <td>bool</td>
                <td>$markAsMigrated</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>void</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\Migrations\MigrationException">MigrationException</abbr></td>
                <td></td>
            </tr>
                    <tr>
                <td><a target="_blank" rel="noopener" href="https://www.php.net/LogicException">LogicException</a></td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_generateMigration">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L536">at line 536</a></div>
        <code>                    array
    <strong>generateMigration</strong>(bool $diffAgainstCurrent = true, string $filterExpression = null)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Generates a new migration file and returns the path to it.</p></p>                <p><p>If $diffAgainstCurrent is true, it generates a migration file with the
diff between current DB structure and the found mapping metadata.</p>
<p>Only include tables/sequences matching the $filterExpression regexp when
diffing models and existing schema.</p>
<p>Otherwise an empty migration skeleton is generated.</p></p>        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td>bool</td>
                <td>$diffAgainstCurrent</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$filterExpression</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>array</td>
            <td><p>Path to the new file</p></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="Doctrine\ORM\ORMException">ORMException</abbr></td>
                <td></td>
            </tr>
                    <tr>
                <td><a href="../../../../Neos/Utility/Exception/FilesException.html"><abbr title="Neos\Utility\Exception\FilesException">FilesException</abbr></a></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_writeMigrationClassToFile">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L613">at line 613</a></div>
        <code>            protected        string
    <strong>writeMigrationClassToFile</strong>(<abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr> $configuration, string|null $up, string|null $down)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p class="no-description">No description</p>
                    
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr></td>
                <td>$configuration</td>
                <td></td>
            </tr>
                    <tr>
                <td>string|null</td>
                <td>$up</td>
                <td></td>
            </tr>
                    <tr>
                <td>string|null</td>
                <td>$down</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><a target="_blank" rel="noopener" href="https://www.php.net/RuntimeException">RuntimeException</a></td>
                <td></td>
            </tr>
                    <tr>
                <td><a href="../../../../Neos/Utility/Exception/FilesException.html"><abbr title="Neos\Utility\Exception\FilesException">FilesException</abbr></a></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_buildCodeFromSql">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L684">at line 684</a></div>
        <code>            protected        string
    <strong>buildCodeFromSql</strong>(<abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr> $configuration, array $sql)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Returns PHP code for a migration file that &quot;executes&quot; the given
array of SQL statements.</p></p>                        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\Migrations\Configuration\Configuration">Configuration</abbr></td>
                <td>$configuration</td>
                <td></td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$sql</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getDatabasePlatformName">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L716">at line 716</a></div>
        <code>                    string
    <strong>getDatabasePlatformName</strong>()
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>Get name of current database platform</p></p>                        
        </div>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
                            <h4>Exceptions</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\DBALException">DBALException</abbr></td>
                <td></td>
            </tr>
            </table>

            
            
                    </div>
    </div>

            </div>
                    <div class="method-item">
                    <h3 id="method_getForeignKeyHandlingSql">
        <div class="location"><a href="https://github.com/neos/flow-development-collection/blob/6.3/Neos.Flow/Classes/Persistence/Doctrine/Service.php#L757">at line 757</a></div>
        <code>        static            array
    <strong>getForeignKeyHandlingSql</strong>(<abbr title="Doctrine\DBAL\Schema\Schema">Schema</abbr> $schema, <abbr title="Doctrine\DBAL\Platforms\AbstractPlatform">AbstractPlatform</abbr> $platform, array $tableNames, string $search, string $replace)
        </code>
    </h3>
    <div class="details">    
    
            

        <div class="method-description">
                            <p><p>This serves a rather strange use case: renaming columns used in FK constraints.</p></p>                <p><p>For a column that is used in a FK constraint to be renamed, the FK constraint has to be
dropped first, then the column can be renamed and last the FK constraint needs to be
added back (using the new name, of course).</p>
<p>This method helps with the task of handling the FK constraints during this. Given a list
of tables that contain columns to be renamed and a search/replace pair for the column name,
it will return an array with arrays with drop and add SQL statements.</p>
<p>Use them like this before and after renaming the affected fields:</p>
<p>// collect foreign keys pointing to &quot;our&quot; tables
$tableNames = array(...);
$foreignKeyHandlingSql = $this-&gt;getForeignKeyHandlingSql($schema, $tableNames, 'old_name', 'new_name');</p>
<p>// drop FK constraints
foreach ($foreignKeyHandlingSql['drop'] as $sql) {
$this-&gt;addSql($sql);
}</p>
<p>// rename columns now</p>
<p>// add back FK constraints
foreach ($foreignKeyHandlingSql['add'] as $sql) {
$this-&gt;addSql($sql);
}</p></p>        
        </div>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table class="table table-condensed">
                    <tr>
                <td><abbr title="Doctrine\DBAL\Schema\Schema">Schema</abbr></td>
                <td>$schema</td>
                <td></td>
            </tr>
                    <tr>
                <td><abbr title="Doctrine\DBAL\Platforms\AbstractPlatform">AbstractPlatform</abbr></td>
                <td>$platform</td>
                <td></td>
            </tr>
                    <tr>
                <td>array</td>
                <td>$tableNames</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$search</td>
                <td></td>
            </tr>
                    <tr>
                <td>string</td>
                <td>$replace</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table class="table table-condensed">
        <tr>
            <td>array</td>
            <td></td>
        </tr>
    </table>

            
            
            
                    </div>
    </div>

            </div>
            </div>

    
</div><div id="footer">
        Generated by <a href="https://github.com/code-lts/doctum">Doctum, a API Documentation generator and fork of Sami</a>.            <br/>Learn more about the <a href="https://flow.neos.io" rel="noreferrer noopener" target="_blank">Flow Framework</a> if you like!</div></div>
    </div>
    </body>

</html>
